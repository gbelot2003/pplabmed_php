{"version":3,"sources":["image-form.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"images-form.js","sourcesContent":["(function(){\n    $('.imageCanvas').each(function (ind, val){\n        var x = 0, y = 0;\n\n        let image   = $(this).find('.image');\n        let btnPlus = $(this).find('#changePlus');\n        let btnLess = $(this).find('#changeLess');\n        let btnSave = $(this).find('#changeSave');\n        let crf = $('input[name=\"_token\"]').val();\n        let del = $(this).find('.delete');\n\n        let id = image.prop('id');\n        let name = image.prop('alt');\n        console.log('id-' + id);\n\n\n        let classList = image.attr('class');\n        let arr = classList.split(' ');\n        let className = '.'+arr[arr.length-1];\n        console.log(className);\n\n        $(btnPlus).click(function (e) {\n            e.preventDefault();\n            btnSave.show();\n            y = (x + 5);\n\n            Caman(className, function () {\n                this.brightness(y);\n                this.render();\n            });\n        });\n\n        $(btnLess).click(function (e) {\n            e.preventDefault();\n            btnSave.show();\n            y = (x - 5);\n\n            Caman(className, function () {\n                this.brightness(y);\n                this.render();\n            });\n        });\n\n        $(btnSave).click(function(e){\n            e.preventDefault();\n            let canvas = $(className);\n            let dataUrl = canvas.get(0).toDataURL();\n            let linkId = $('input[name=\"link_id\"]').val();\n\n            $.ajax({\n                type: \"put\",\n                url: \"/histo/images/update/\" + id,\n                data: {\n                    '_token': crf,\n                    'images': dataUrl,\n                    'link_id': linkId,\n                    'name': name\n                }\n            }).done(function(response) {\n                btnSave.hide();\n                console.log(response);\n            });\n        });\n\n        $(del).on('click',function(e){\n            e.preventDefault();\n            $(this).closest(\"div\").remove();\n            $.ajax({\n                type: \"get\",\n                url:\"/histo/images/delete/\" + id\n            }).done(function(res){\n                $(this).closest(\"div\").remove();\n                console.log('read')\n            })\n        })\n\n    });\n})(jQuery);\n"]}