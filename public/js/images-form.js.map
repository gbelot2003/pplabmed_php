{"version":3,"sources":["image-form.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"images-form.js","sourcesContent":["(function () {\r\n    $.ajaxSetup({\r\n        headers: {\r\n            'X-XSRF-TOKEN': $('input[name=\"_token\"]').val()\r\n        }\r\n    });\r\n\r\n    $(\"#brightness\").prop('disabled', true);\r\n    $(\"#contrast\").prop('disabled', true);\r\n    $(\"#saturation\").prop('disabled', true);\r\n    $(\"#exposure\").prop('disabled', true);\r\n    $(\"#descripcion\").prop('disabled', true);\r\n\r\n    function PostImage(resp, basic) {\r\n\r\n        $.ajax({\r\n            type: \"put\",\r\n            url: \"/histo/images/update/\" + id,\r\n            data: {\r\n                '_token': crf,\r\n                'images': resp,\r\n                'descripcion': $('#descripcion').val(),\r\n                'link_id': linkId,\r\n                'name': name\r\n            }\r\n        }).done(function (response) {\r\n            location.reload();\r\n            basic.croppie('destroy');\r\n        });\r\n    }\r\n\r\n\r\n    var linkId = $(\"#link_id\").val();\r\n    var name = $(\"#image_name\").val();\r\n    var id = $(\"#id\").val();\r\n    var crf = $('input[name=\"_token\"]').val();\r\n    var descripcion = $('#descripcion').val();\r\n\r\n    $('#cortar').on('click', function(e){\r\n\r\n        $(this).prop('disabled', true);\r\n        $(\"#descripcion\").prop('disabled', false);\r\n        $(\"#filtros\").hide();\r\n\r\n        $('#gcortar').show();\r\n        var basic = $('#images2Cam').croppie({\r\n            viewport: {\r\n                width: 500,\r\n                height: 400\r\n            }\r\n        });\r\n\r\n        $(\"#gcortar\").on('click', function () {\r\n\r\n            size = 'viewport';\r\n            basic.croppie('result', {\r\n                type: 'canvas',\r\n                size: size\r\n            }).then(function (resp) {\r\n                PostImage(resp, basic);\r\n                $(this).prop('disabled', false);\r\n                $(\"#descripcion\").prop('disabled', true);\r\n            });\r\n\r\n\r\n        })\r\n    });\r\n\r\n\r\n    $('#filtros').on('click', function (e) {\r\n        $(\"#brightness\").prop('disabled', false);\r\n        $(\"#contrast\").prop('disabled', false);\r\n        $(\"#saturation\").prop('disabled', false);\r\n        $(\"#exposure\").prop('disabled', false);\r\n        $(\"#cortar\").prop('disabled', true);\r\n        $(this).hide();\r\n        $(\"#gfiltros\").show();\r\n        $(\"#gfiltros\").prop('disabled', true);\r\n        $(\"#descripcion\").prop('disabled', false);\r\n    });\r\n\r\n    $(\"#gfiltros\").on('click', function (e) {\r\n        var canvas = $(\"#images2Cam\");\r\n        var dataUrl = canvas.get(0).toDataURL();\r\n\r\n\r\n        $.ajax({\r\n            type: \"put\",\r\n            url: \"/histo/images/update/\" + id,\r\n            data: {\r\n                '_token': crf,\r\n                'images': dataUrl,\r\n                'descripcion': $('#descripcion').val(),\r\n                'link_id': linkId,\r\n                'name': name\r\n            }\r\n        }).done(function (response) {\r\n            location.reload();\r\n            $(\"#brightness\").prop('disabled', true);\r\n            $(\"#contrast\").prop('disabled', true);\r\n            $(\"#saturation\").prop('disabled', true);\r\n            $(\"#exposure\").prop('disabled', true);\r\n            $(\"#cortar\").prop('disabled', false);\r\n            $(\"#descripcion\").prop('disabled', true);\r\n            $(this).hide();\r\n            $(\"#filtros\").show();\r\n        });\r\n    });\r\n\r\n    $(\"#brightness, #contrast, #saturation, #exposure\").on('change', function () {\r\n        var bright = $(\"#brightness\").val();\r\n        var contrastF = $(\"#contrast\").val();\r\n        var saturation = $(\"#saturation\").val();\r\n        var exposure = $(\"#exposure\").val();\r\n        $(\"#gfiltros\").prop('disabled', false);\r\n\r\n        $('#brightnessValue').text(bright);\r\n        $('#contrastValue').text(contrastF);\r\n        $('#saturationValue').text(saturation);\r\n        $('#exposureValue').text(exposure);\r\n\r\n        Caman(\"#images2Cam\", function () {\r\n            this.revert(false);\r\n\r\n            this.brightness(parseInt(bright));\r\n            this.newLayer(function (){\r\n                this.setBlendingMode('multiply');\r\n                this.copyParent();\r\n                this.filter.contrast(parseInt(contrastF));\r\n                this.filter.saturation(saturation);\r\n                this.filter.exposure(exposure);\r\n\r\n            });\r\n\r\n            this.render(function () {\r\n                console.log('done')\r\n            });\r\n        });\r\n    });\r\n\r\n    $('#descripcion').on('change', function () {\r\n        Caman(\"#images2Cam\", function () {\r\n            this.brightness(1);\r\n        });\r\n        $(\"#gfiltros\").prop('disabled', false);\r\n    });\r\n\r\n    $('#preborrado').on('click', function (e) {\r\n        e.preventDefault();\r\n        $(this).hide();\r\n        $('#borrado').show();\r\n        $('#cborrado').show();\r\n    })\r\n\r\n    $(\"#cborrado\").on('click',function (e) {\r\n        e.preventDefault();\r\n        $(this).hide();\r\n        $('#preborrado').show();\r\n        $('#borrado').hide();\r\n    })\r\n\r\n\r\n\r\n})(jQuery);\r\n"]}