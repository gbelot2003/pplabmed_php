{"version":3,"sources":["image-form.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"images-form.js","sourcesContent":["(function () {\n    $.ajaxSetup({\n        headers: {\n            'X-XSRF-TOKEN': $('input[name=\"_token\"]').val()\n        }\n    });\n\n    $(\"#brightness\").prop('disabled', true);\n    $(\"#contrast\").prop('disabled', true);\n    $(\"#saturation\").prop('disabled', true);\n    $(\"#exposure\").prop('disabled', true);\n    $(\"#descripcion\").prop('disabled', true);\n\n    function PostImage(resp, basic) {\n\n        $.ajax({\n            type: \"put\",\n            url: \"/histo/images/update/\" + id,\n            data: {\n                '_token': crf,\n                'images': resp,\n                'descripcion': $('#descripcion').val(),\n                'link_id': linkId,\n                'name': name\n            }\n        }).done(function (response) {\n            location.reload();\n            basic.croppie('destroy');\n        });\n    }\n\n\n    var linkId = $(\"#link_id\").val();\n    var name = $(\"#image_name\").val();\n    var id = $(\"#id\").val();\n    var crf = $('input[name=\"_token\"]').val();\n    var descripcion = $('#descripcion').val();\n\n    $('#cortar').on('click', function(e){\n\n        $(this).prop('disabled', true);\n        $(\"#descripcion\").prop('disabled', false);\n        $(\"#filtros\").hide();\n\n        $('#gcortar').show();\n        var basic = $('#images2Cam').croppie({\n            viewport: {\n                width: 500,\n                height: 400\n            }\n        });\n\n        $(\"#gcortar\").on('click', function () {\n\n            size = 'viewport';\n            basic.croppie('result', {\n                type: 'canvas',\n                size: size\n            }).then(function (resp) {\n                PostImage(resp, basic);\n                $(this).prop('disabled', false);\n                $(\"#descripcion\").prop('disabled', true);\n            });\n\n\n        })\n    });\n\n\n    $('#filtros').on('click', function (e) {\n        $(\"#brightness\").prop('disabled', false);\n        $(\"#contrast\").prop('disabled', false);\n        $(\"#saturation\").prop('disabled', false);\n        $(\"#exposure\").prop('disabled', false);\n        $(\"#cortar\").prop('disabled', true);\n        $(this).hide();\n        $(\"#gfiltros\").show();\n        $(\"#gfiltros\").prop('disabled', true);\n        $(\"#descripcion\").prop('disabled', false);\n    });\n\n    $(\"#gfiltros\").on('click', function (e) {\n        var canvas = $(\"#images2Cam\");\n        var dataUrl = canvas.get(0).toDataURL();\n\n\n        $.ajax({\n            type: \"put\",\n            url: \"/histo/images/update/\" + id,\n            data: {\n                '_token': crf,\n                'images': dataUrl,\n                'descripcion': $('#descripcion').val(),\n                'link_id': linkId,\n                'name': name\n            }\n        }).done(function (response) {\n            location.reload();\n            $(\"#brightness\").prop('disabled', true);\n            $(\"#contrast\").prop('disabled', true);\n            $(\"#saturation\").prop('disabled', true);\n            $(\"#exposure\").prop('disabled', true);\n            $(\"#cortar\").prop('disabled', false);\n            $(\"#descripcion\").prop('disabled', true);\n            $(this).hide();\n            $(\"#filtros\").show();\n        });\n    });\n\n    $(\"#brightness, #contrast, #saturation, #exposure\").on('change', function () {\n        var bright = $(\"#brightness\").val();\n        var contrastF = $(\"#contrast\").val();\n        var saturation = $(\"#saturation\").val();\n        var exposure = $(\"#exposure\").val();\n        $(\"#gfiltros\").prop('disabled', false);\n\n        $('#brightnessValue').text(bright);\n        $('#contrastValue').text(contrastF);\n        $('#saturationValue').text(saturation);\n        $('#exposureValue').text(exposure);\n\n        Caman(\"#images2Cam\", function () {\n            this.revert(false);\n\n            this.brightness(parseInt(bright));\n            this.newLayer(function (){\n                this.setBlendingMode('multiply');\n                this.copyParent();\n                this.filter.contrast(parseInt(contrastF));\n                this.filter.saturation(saturation);\n                this.filter.exposure(exposure);\n\n            });\n\n            this.render(function () {\n                console.log('done')\n            });\n        });\n    });\n\n    $('#descripcion').on('change', function () {\n        Caman(\"#images2Cam\", function () {\n            this.brightness(1);\n        });\n        $(\"#gfiltros\").prop('disabled', false);\n    });\n\n    $('#preborrado').on('click', function (e) {\n        e.preventDefault();\n        $(this).hide();\n        $('#borrado').show();\n        $('#cborrado').show();\n    })\n\n    $(\"#cborrado\").on('click',function (e) {\n        e.preventDefault();\n        $(this).hide();\n        $('#preborrado').show();\n        $('#borrado').hide();\n    })\n\n\n\n})(jQuery);\n"]}