{"version":3,"sources":["image-form.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"images-form.js","sourcesContent":["(function () {\n    $.ajaxSetup({\n        headers: {\n            'X-XSRF-TOKEN': $('input[name=\"_token\"]').val()\n        }\n    });\n\n    $(\"#brightness\").prop('disabled', true);\n    $(\"#contrast\").prop('disabled', true);\n    $(\"#saturation\").prop('disabled', true);\n    $(\"#exposure\").prop('disabled', true);\n\n    function PostImage(resp, basic) {\n        let descripcion = $('#descripcion').val();\n        $.ajax({\n            type: \"put\",\n            url: \"/histo/images/update/\" + id,\n            data: {\n                '_token': crf,\n                'images': resp,\n                'descripcion': descripcion,\n                'link_id': linkId,\n                'name': name\n            }\n        }).done(function (response) {\n            location.reload();\n            basic.croppie('destroy');\n        });\n    }\n\n    let url = $(\"#images2Cam\").attr('src');\n\n    let linkId = $(\"#link_id\").val();\n    let name = $(\"#image_name\").val();\n    let id = $(\"#id\").val();\n    let crf = $('input[name=\"_token\"]').val();\n    let descripcion = $('#descripcion').val();\n\n    $('#cortar').on('click', function(e){\n\n        $(this).prop('disabled', true);\n        $(\"#filtros\").hide();\n\n        $('#gcortar').show();\n        var basic = $('#images2Cam').croppie({\n            viewport: {\n                width: 500,\n                height: 400\n            }\n        });\n\n        $(\"#gcortar\").on('click', function () {\n\n            size = 'viewport';\n            console.log(descripcion);\n            basic.croppie('result', {\n                type: 'canvas',\n                size: size\n            }).then(function (resp) {\n                PostImage(resp, basic);\n                $(this).prop('disabled', false);\n            });\n\n\n        })\n    });\n\n\n    $('#filtros').on('click', function (e) {\n        $(\"#brightness\").prop('disabled', false);\n        $(\"#contrast\").prop('disabled', false);\n        $(\"#saturation\").prop('disabled', false);\n        $(\"#exposure\").prop('disabled', false);\n        $(\"#cortar\").prop('disabled', true);\n        $(this).hide();\n        $(\"#gfiltros\").show();\n        $(\"#gfiltros\").prop('disabled', true);\n    });\n\n    $(\"#gfiltros\").on('click', function (e) {\n        let canvas = $(\"#images2Cam\");\n        let dataUrl = canvas.get(0).toDataURL();\n\n        $.ajax({\n            type: \"put\",\n            url: \"/histo/images/update/\" + id,\n            data: {\n                '_token': crf,\n                'images': dataUrl,\n                'descripcion': descripcion,\n                'link_id': linkId,\n                'name': name\n            }\n        }).done(function (response) {\n            location.reload();\n            $(\"#brightness\").prop('disabled', true);\n            $(\"#contrast\").prop('disabled', true);\n            $(\"#saturation\").prop('disabled', true);\n            $(\"#exposure\").prop('disabled', true);\n            $(\"#cortar\").prop('disabled', false);\n            $(this).hide();\n            $(\"#filtros\").show();\n        });\n    });\n\n    $(\"#brightness, #contrast, #saturation, #exposure\").on('change', function () {\n        let bright = $(\"#brightness\").val();\n        let contrastF = $(\"#contrast\").val();\n        let saturation = $(\"#saturation\").val();\n        let exposure = $(\"#exposure\").val();\n        $(\"#gfiltros\").prop('disabled', false);\n\n        $('#brightnessValue').text(bright);\n        $('#contrastValue').text(contrastF);\n        $('#saturationValue').text(saturation);\n        $('#exposureValue').text(exposure);\n\n        Caman(\"#images2Cam\", function () {\n            this.revert(false);\n\n            this.brightness(parseInt(bright));\n            this.newLayer(function (){\n                this.setBlendingMode('multiply');\n                this.copyParent();\n                this.filter.contrast(parseInt(contrastF));\n                this.filter.saturation(saturation);\n                this.filter.exposure(exposure);\n\n            });\n\n            this.render(function () {\n                console.log('done')\n            });\n        });\n    });\n\n/*\n\n $(\"#contrast\").change(function () {\n        let vars = $(this).val();\n        $(\"#b_meter\").text(vars);\n        Caman(\"#images2Cam\", function () {\n            this.revert();\n            this.contrast(vars);\n            this.render();\n        });\n    });\n\n    $(\"#saturacion\").change(function () {\n        let vars = $(this).val();\n        $(\"#c_meter\").text(vars);\n    })*/\n})(jQuery);\n/*\n(function () {\n    $('.imageCanvas').each(function (ind, val) {\n        var x = 0, y = 0;\n\n        let image = $(this).find('.image');\n        let btnPlus = $(this).find('#changePlus');\n        let btnLess = $(this).find('#changeLess');\n        let btnSave = $(this).find('#changeSave');\n        let crf = $('input[name=\"_token\"]').val();\n        let del = $(this).find('.delete');\n\n        let id = image.prop('id');\n        let name = image.prop('alt');\n        console.log('id-' + id);\n\n\n        let classList = image.attr('class');\n        let arr = classList.split(' ');\n        let className = '.' + arr[arr.length - 1];\n        console.log(className);\n\n        $(btnPlus).click(function (e) {\n            e.preventDefault();\n            btnSave.show();\n            y = (x + 5);\n\n            Caman(className, function () {\n                this.brightness(y);\n                this.render();\n            });\n        });\n\n        $(btnLess).click(function (e) {\n            e.preventDefault();\n            btnSave.show();\n            y = (x - 5);\n\n            Caman(className, function () {\n                this.brightness(y);\n                this.render();\n            });\n        });\n\n        $(btnSave).click(function (e) {\n            e.preventDefault();\n            let canvas = $(className);\n            let dataUrl = canvas.get(0).toDataURL();\n            let linkId = $('input[name=\"link_id\"]').val();\n\n            $.ajax({\n                type: \"put\",\n                url: \"/histo/images/update/\" + id,\n                data: {\n                    '_token': crf,\n                    'images': dataUrl,\n                    'link_id': linkId,\n                    'name': name\n                }\n            }).done(function (response) {\n                btnSave.hide();\n                console.log(response);\n            });\n        });\n\n        $(del).on('click', function (e) {\n            e.preventDefault();\n            $(this).closest(\"div\").remove();\n            $.ajax({\n                type: \"get\",\n                url: \"/histo/images/delete/\" + id\n            }).done(function (res) {\n                $(this).closest(\"div\").remove();\n                console.log('read')\n            })\n        })\n\n    });\n})(jQuery);*/\n"]}